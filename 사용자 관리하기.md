## 사용자 관리하기

윈도우 시스템에서 사용자끼리 협업하기 위해서는 git과 같은 협업 툴을 이용하거나
공유 파일과 같은 시스템을 사용한다.
그럼 리눅스에서도 같은 기능을 위해 공유 파일이나 같은 서버 상에서 작업이 가능해야하는데
그러러면 같은 리눅스 서버에 여러 사용자를 넣을 수 있어야 한다.
그럼 여러 사용자가 사용이 가능하다는 것을 알아보기 위해서
하나의 서버에 여러 사용자를 만드는 방법에 대해서 알아보겠다.

사용자 관리에는 크게 세 가지가 있다.

1. 사용자 추가하기
2. 사용자 변경하기
3. 사용자 삭제하기

사실 사용자에는 추가하는 것이 가장 중요하기 때문에 추가하는 것을 중점으로 다룰 것이다.

### 1. 사용자 추가하기

사용자를 추가하는 명령어는 다음과 같다.

```Linux
$ useradd 사용자명
```

이렇게 사용자를 생성한다.
리눅스 상에서 Alt + F2(F3, F4, F5, F6)를 누르면 새로운 리눅스 창이 뜨게 된다.
그러면 각각의 창에 대한 로그인을 할 수 있는데 F1에는 내가 로그인 되어 있으므로
Alt + F2에 만든 사용자명을 쳐서 로그인 하면 된다.

그런데 아이디는 알지만 비밀번호를 설정하지 않아서 알 수 없다.
그래서 비밀번호를 설정해야 한다.
비밀번호를 설정하는 방법은 다음과 같다.

```Linux
$ sudo passwd 사용자명
```

이렇게 비밀번호를 설정하게 되면 로그인까지는 할 수 있다.
하지만 기본적으로 제공되는 /home/사용자명 디렉토리가 존재하지 않는다.
그래서 디렉토리를 생성해주어야 하는데 그 방법은 기존에 디렉토리를 생성하는 것과 같다.

```Linux
$ sudo mkdir /home/사용자명
```

이렇게 디렉토리를 생성했지만 새로 만든 사용자는 만들어준 디렉토리를 사용할 수 있는 권한이 없다.
처음 디렉토리를 생성하게 되면 권한이 root에게 있고 그 그룹이 root이다.
이를 변경하기 위해서는 chown 명령어를 사용하여 권한을 바꿔주어야 한다.

```Linux
$ sudo chown 사용자명:사용자명 /home/사용자명
```

이렇게 chown 명령어를 통해서 권한과 그 그룹을 변경할 수 있다.
chown은 change owner의 약자이다.

이렇게까지 설정을 하게 되면 완전한 사용자가 추가되어 정상적으로 사용할 수 있게 된다.

### 2. 사용자 변경하기

사용자의 정보 즉, 사용자의 이름이나 사용자가 사용하는 디렉토리의 이름을 변경하기 위해서는
다음과 같은 명령어를 사용한다.

```Linux
$ sudo usermod -l 원래사용자명 바뀐사용자명
$ sudo usermod -d /home/원래사용자명 -d 바뀐사용자명
```

이러한 변경점이 있지만 다음에 사용자 변경하기에 대해서 자세히 다룰 때 다시 알아보겠다.

### 3. 사용자 삭제하기

사용자를 삭제하는 방법은 다음과 같은 명령어를 사용하면 된다.

```Linux
$ sudo userdel 사용자명
```

이렇게 삭제 요청을 할 수 있다.

### 4. 사용자 생성 자동화하기

사용자를 생성하는 작업은 획일화되어 있다.
그래서 이 작업을 실행파일에 넣어서 한 번의 실행으로 모든 생성 과정을 거치게 할 수 있다.
하는 방법은 간단하다.

1. 새 파일을 생성한다.
2. 새 파일 안에 사용자를 생성하는 명령어를 작성한다.
3. PATH에 새 파일을 넣고 실행한다.

만약 testuser라는 유저를 생성하는 testuseradd 파일을 생성한다면 다음과 같다.

```Linux
~/bin$ nano testuseradd

useradd testuser
mkdir /home/testuser
chown testuser:testuser /home/testuser

~/bin$ ./testuseradd
생성 완료
```

이렇게 하면 testuser 라는 사용자가 생성이 된다.
하지만 이렇게 복잡한 방법보다 adduser 라는 명령어를 사용하게 되면 간단하게 이 작업을 할 수 있다.
물론 deluser라는 명령어도 있다. 간단하게 사용자를 삭제할 수 있다.